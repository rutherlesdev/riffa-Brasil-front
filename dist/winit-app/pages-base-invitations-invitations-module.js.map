{"version":3,"sources":["webpack:///./src/pages/base/invitations/components/invitations/invitations.component.html","webpack:///./src/pages/base/invitations/components/invitations/invitations.component.scss","webpack:///./src/pages/base/invitations/components/invitations/invitations.component.ts","webpack:///./src/pages/base/invitations/components/invites-list/invites-list.component.html","webpack:///./src/pages/base/invitations/components/invites-list/invites-list.component.scss","webpack:///./src/pages/base/invitations/components/invites-list/invites-list.component.ts","webpack:///./src/pages/base/invitations/components/send-invites/send-invites.component.html","webpack:///./src/pages/base/invitations/components/send-invites/send-invites.component.scss","webpack:///./src/pages/base/invitations/components/send-invites/send-invites.component.ts","webpack:///./src/pages/base/invitations/invitations.module.ts"],"names":[],"mappings":"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","file":"pages-base-invitations-invitations-module.js","sourcesContent":["module.exports = \"<div class=\\\"container bg-white my-3\\\">\\r\\n  <ngb-tabset>\\r\\n    <ngb-tab title=\\\"Send Invites\\\">\\r\\n      <ng-template ngbTabContent>\\r\\n        <app-send-invites></app-send-invites>\\r\\n      </ng-template>\\r\\n    </ngb-tab>\\r\\n    <ngb-tab title=\\\"View Sent Invites\\\">\\r\\n      <ng-template ngbTabContent>\\r\\n        <app-invites-list></app-invites-list>\\r\\n      </ng-template>\\r\\n    </ngb-tab>\\r\\n  </ngb-tabset>\\r\\n</div>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvcGFnZXMvYmFzZS9pbnZpdGF0aW9ucy9jb21wb25lbnRzL2ludml0YXRpb25zL2ludml0YXRpb25zLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\n\r\n@Component({\r\n  selector: 'app-invitations',\r\n  templateUrl: './invitations.component.html',\r\n  styleUrls: ['./invitations.component.scss']\r\n})\r\nexport class InvitationsComponent extends Extender implements OnInit {\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n  ) {\r\n    super(injector);\r\n  }\r\n\r\n  public ngOnInit() {\r\n  }\r\n\r\n}\r\n","module.exports = \"<app-spinner class=\\\"mt-3\\\" [isLoading]=\\\"loading\\\">\\r\\n\\r\\n  <ng-container *ngIf=\\\"invitations && invitations.length > 0\\\">\\r\\n    <h3>Invitations Sent</h3>\\r\\n    <app-table [config]=\\\"{showSelect: false}\\\" [data]=\\\"invitations\\\" [headers]=\\\"tableHeaders\\\" [actions]=\\\"tableActions\\\">\\r\\n    </app-table>\\r\\n    <ngb-pagination maxSize=\\\"5\\\" [collectionSize]=\\\"invitationsBK.length-1\\\" (pageChange)=\\\"onPageChange($event)\\\"\\r\\n      aria-label=\\\"Default pagination\\\">\\r\\n    </ngb-pagination>\\r\\n  </ng-container>\\r\\n\\r\\n  <ng-container *ngIf=\\\"invitations && invitations.length === 0\\\">\\r\\n    <div class=\\\"jumbotron\\\">\\r\\n      <h4>Empty</h4>\\r\\n      <p class=\\\"lead text-dark\\\">No invitations to display</p>\\r\\n    </div>\\r\\n  </ng-container>\\r\\n\\r\\n</app-spinner>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvcGFnZXMvYmFzZS9pbnZpdGF0aW9ucy9jb21wb25lbnRzL2ludml0ZXMtbGlzdC9pbnZpdGVzLWxpc3QuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport {\r\n  AccountApi,\r\n  FireLoopRef,\r\n  Invitation,\r\n  InvitationApi,\r\n  RealTime\r\n} from '../../../../../common/sdk';\r\nimport {\r\n  ITableActions,\r\n  ITableHeader\r\n} from '../../../../../modules/table/models/table';\r\n\r\n@Component({\r\n  selector: 'app-invites-list',\r\n  templateUrl: './invites-list.component.html',\r\n  styleUrls: ['./invites-list.component.scss']\r\n})\r\nexport class InvitesListComponent extends Extender implements OnInit {\r\n  public invitations: Invitation[] = [];\r\n  public invitationsBK: Invitation[] = [];\r\n  public tableActions: ITableActions[] = [\r\n    {\r\n      color: 'text-danger',\r\n      icon: 'trash-o',\r\n      text: 'Delete',\r\n      event: (data) => {\r\n        this.delete(data);\r\n      }\r\n    }\r\n  ];\r\n  public tableHeaders: ITableHeader[] = [\r\n    {\r\n      text: 'receiverEmail',\r\n      formatted_text: 'Recipient',\r\n      type: 'text'\r\n    },\r\n    {\r\n      text: 'senderClaimed',\r\n      formatted_text: 'Sender Claimed',\r\n      type: 'badge.primary'\r\n    },\r\n    {\r\n      text: 'receiverClaimed',\r\n      formatted_text: 'Reciever Claimed',\r\n      type: 'badge.primary'\r\n    },\r\n    {\r\n      text: 'createdAt',\r\n      formatted_text: 'Created At',\r\n      type: 'date'\r\n    },\r\n    {\r\n      text: 'updatedAt',\r\n      formatted_text: 'Updated At',\r\n      type: 'date'\r\n    }\r\n  ];\r\n  public pageSize: number = 10;\r\n  public invitationRef: FireLoopRef<Invitation>;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _rt: RealTime,\r\n    private _accountApi: AccountApi,\r\n    private _invitationApi: InvitationApi\r\n  ) {\r\n    super(injector);\r\n    this._rt.onReady().subscribe(() => {});\r\n  }\r\n  public ngOnInit() {\r\n    this.invitationRef = this._rt.FireLoop.ref<Invitation>(Invitation);\r\n    this._getInvitations();\r\n  }\r\n\r\n  public onPageChange(page): void {\r\n    const start = (page - 1) * this.pageSize;\r\n    this.invitations = this.invitationsBK.slice(start, start + this.pageSize);\r\n  }\r\n\r\n  private delete(item): void {\r\n    this.dialog\r\n      .openAlert({\r\n        data: {\r\n          config: {\r\n            heading: 'Delete Invitation',\r\n            body: 'Are you sure you want to delete this invitation?'\r\n          },\r\n          buttons: {\r\n            buttons: [\r\n              { text: 'Delete', color: 'danger', eventname: 'delete' },\r\n              { text: 'Close', color: 'outline-danger', eventname: 'close' }\r\n            ]\r\n          }\r\n        }\r\n      })\r\n      .afterClosed.subscribe((event) => {\r\n        if (event === 'delete') {\r\n          this.invitationRef.remove(item).subscribe();\r\n        }\r\n      });\r\n  }\r\n\r\n  private _getInvitations(): void {\r\n    this.loading = true;\r\n    this.invitationRef\r\n      .on('change', {\r\n        where: { isDeleted: false, accountId: this.currentUser.id },\r\n        include: {\r\n          relation: 'account'\r\n        }\r\n      })\r\n      .subscribe((data: Invitation[]) => {\r\n        this.invitations = this.invitationsBK = data;\r\n        this.loading = false;\r\n      });\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"card border-top-0\\\">\\r\\n  <div class=\\\"card-body\\\">\\r\\n    <form-field suffix=\\\"true\\\">\\r\\n      <input type=\\\"email\\\" placeholder=\\\"Type recipient email and click add button\\\" inputRef [(ngModel)]=\\\"email\\\"\\r\\n        name=\\\"email\\\" #emailRef=\\\"ngModel\\\">\\r\\n      <i suffix class=\\\"fa fa-plus pointer\\\" (click)=\\\"emails.push(email); emailRef.reset()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"AddInviteEmail\\\" angularticsLabel=\\\"AddInviteEmailButton\\\" [angularticsCategory]=\\\"'SendInvitesPage'\\\"></i>\\r\\n    </form-field>\\r\\n\\r\\n    <div class=\\\"display-emails my-3\\\">\\r\\n      <span class=\\\"bg-info text-light mx-1 px-2 py-1 rounded\\\" *ngFor=\\\"let item of emails\\\">{{item}}\\r\\n        <span class=\\\"mx-1 text-light pointer\\\" (click)=\\\"removeEmail(item)\\\">x</span>\\r\\n      </span>\\r\\n    </div>\\r\\n\\r\\n    <hr class=\\\"my-3\\\">\\r\\n    <form-field prefix=\\\"true\\\" suffix=\\\"true\\\">\\r\\n      <span prefix>Invitation link</span>\\r\\n      <input type=\\\"text\\\" id=\\\"invite-link\\\" class=\\\"bg-light\\\" readonly inputRef [(ngModel)]=\\\"invite.link\\\" name=\\\"link\\\"\\r\\n        #linkInput=\\\"ngModel\\\" #linkRef>\\r\\n      <span suffix *ngIf=\\\"invite.link\\\" (click)=\\\"copy(invite.link)\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"CopyInviteLink\\\" angularticsLabel=\\\"CopyInviteLinkButton\\\" [angularticsCategory]=\\\"'SendInvitesPage'\\\">Copy</span>\\r\\n      <span suffix class=\\\"text-secondary\\\" *ngIf=\\\"!invite.link\\\" (click)=\\\"getInviteLink()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"GenerateInviteLink\\\" angularticsLabel=\\\"GetInviteLinkButton\\\" [angularticsCategory]=\\\"'SendInvitesPage'\\\">Get Referral Link</span>\\r\\n    </form-field>\\r\\n\\r\\n    <form-field>\\r\\n      <textarea inputRef name=\\\"emailContent\\\" id=\\\"emailContent\\\" [(ngModel)]=\\\"invite.content\\\"></textarea>\\r\\n    </form-field>\\r\\n\\r\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" [disabled]=\\\"emails.length === 0\\\" (click)=\\\"addInvitation()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"SendInviteEmail\\\" angularticsLabel=\\\"SendInviteEmailButton\\\" [angularticsCategory]=\\\"'SendInvitesPage'\\\">\\r\\n      Send Invites\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \":host .card {\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9wYWdlcy9iYXNlL2ludml0YXRpb25zL2NvbXBvbmVudHMvc2VuZC1pbnZpdGVzL0M6XFxVc2Vyc1xcVXNlclxcRGVza3RvcFxccmlmZmEtQnJhc2lsLWZyb250L3NyY1xccGFnZXNcXGJhc2VcXGludml0YXRpb25zXFxjb21wb25lbnRzXFxzZW5kLWludml0ZXNcXHNlbmQtaW52aXRlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLHlCQUF5QjtFQUN6QiwwQkFBMEIsRUFBQSIsImZpbGUiOiJzcmMvcGFnZXMvYmFzZS9pbnZpdGF0aW9ucy9jb21wb25lbnRzL3NlbmQtaW52aXRlcy9zZW5kLWludml0ZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgLmNhcmQge1xyXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcclxuICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwO1xyXG4gIH1cclxufVxyXG4iXX0= */\"","import {\r\n  Component,\r\n  ElementRef,\r\n  Injector,\r\n  OnInit,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport { forkJoin } from 'rxjs/internal/observable/forkJoin';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport {\r\n  Account,\r\n  AccountApi,\r\n  Invitation,\r\n  InvitationApi\r\n} from '../../../../../common/sdk';\r\n\r\n@Component({\r\n  selector: 'app-send-invites',\r\n  templateUrl: './send-invites.component.html',\r\n  styleUrls: ['./send-invites.component.scss']\r\n})\r\nexport class SendInvitesComponent extends Extender implements OnInit {\r\n  public email: string;\r\n  public emails: string[] = [];\r\n  public invite: Invitation = new Invitation();\r\n  @ViewChild('linkRef') private linkRef: ElementRef;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _accountApi: AccountApi,\r\n    private _invitationApi: InvitationApi\r\n  ) {\r\n    super(injector);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    if (this.currentUser) {\r\n      this.invite = new Invitation({\r\n        accountId: this.currentUser.id,\r\n        link: this.currentUser.invitivationCode\r\n          ? `${window.location.href}/?page=signup&id=${\r\n          this.currentUser.id\r\n          }&unicode=${this.currentUser.invitivationCode}`\r\n          : null,\r\n        code: this.currentUser.invitivationCode\r\n      });\r\n    }\r\n  }\r\n\r\n  public removeEmail(email: string): void {\r\n    const index = this.emails.findIndex((_email) => _email === email);\r\n    this.emails.splice(index, 1);\r\n  }\r\n\r\n  public copy(): void {\r\n    const copyText: HTMLInputElement = this.linkRef\r\n      .nativeElement as HTMLInputElement;\r\n    copyText.select();\r\n    document.execCommand('copy');\r\n  }\r\n\r\n  public getInviteLink(): void {\r\n    this._accountApi\r\n      .setInvitationCode({ id: this.currentUser.id })\r\n      .subscribe((data: Account) => {\r\n        this.currentUser.invitivationCode = data.invitivationCode;\r\n        this.invite.link = `${window.location.origin}/?page=signup&id=${\r\n          this.currentUser.id\r\n          }&unicode=${this.currentUser.invitivationCode}`;\r\n        this.invite.code = this.currentUser.invitivationCode;\r\n        this.toastr.success('Invitation code has been set');\r\n      });\r\n  }\r\n\r\n  public addInvitation(): void {\r\n    this.emails.forEach((email) => {\r\n      this.invite.receiverEmail = email;\r\n      this._invitationApi.create(this.invite).subscribe();\r\n    });\r\n\r\n    this.send(this.emails);\r\n  }\r\n\r\n  private send(emails): void {\r\n    this.loading = true;\r\n    const emailData = {\r\n      subject: `${this.currentUser.contact.firstName +\r\n        ' ' +\r\n        this.currentUser.contact.lastName} sent you an invitation!`,\r\n      content: `\r\n      \r\n      `\r\n    };\r\n    this._accountApi.sendEmail({ emails, emailData }).subscribe(() => {\r\n      this.loading = false;\r\n      this.toastr.success('Emails have been sent');\r\n    });\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { MomentModule } from 'angular2-moment';\r\nimport { WinitCommonModule } from '../../../common/common.module';\r\nimport { FormFieldModule } from '../../../modules/form-field/form-field.module';\r\nimport { TableModule } from '../../../modules/table/table.module';\r\nimport { InvitationsComponent } from './components/invitations/invitations.component';\r\nimport { SendInvitesComponent } from './components/send-invites/send-invites.component';\r\nimport { InvitesListComponent } from './components/invites-list/invites-list.component';\r\n\r\n@NgModule({\r\n  declarations: [InvitationsComponent, SendInvitesComponent, InvitesListComponent],\r\n  imports: [\r\n    CommonModule,\r\n    WinitCommonModule,\r\n    MomentModule,\r\n    FormFieldModule,\r\n    FormsModule,\r\n    TableModule,\r\n    NgbPaginationModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: InvitationsComponent\r\n      }\r\n    ])\r\n  ]\r\n})\r\nexport class InvitationsModule { }\r\n"],"sourceRoot":""}