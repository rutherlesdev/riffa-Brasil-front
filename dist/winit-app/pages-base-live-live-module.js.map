{"version":3,"sources":["webpack:///./src/pages/base/live/components/live-item/live-item.component.html","webpack:///./src/pages/base/live/components/live-item/live-item.component.scss","webpack:///./src/pages/base/live/components/live-item/live-item.component.ts","webpack:///./src/pages/base/live/components/live/live.component.html","webpack:///./src/pages/base/live/components/live/live.component.scss","webpack:///./src/pages/base/live/components/live/live.component.ts","webpack:///./src/pages/base/live/components/payment/payment.component.html","webpack:///./src/pages/base/live/components/payment/payment.component.scss","webpack:///./src/pages/base/live/components/payment/payment.component.ts","webpack:///./src/pages/base/live/live.module.ts"],"names":[],"mappings":"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","file":"pages-base-live-live-module.js","sourcesContent":["module.exports = \"<div class=\\\"container my-4\\\" *ngIf=\\\"raffle\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col-sm-6\\\">\\r\\n      <div class=\\\"image-wrapper\\\">\\r\\n        <div class=\\\"images\\\">\\r\\n          <div class=\\\"img\\\" [ngClass]=\\\"{'active': selectionIndex === i}\\\" [imageLoader]=\\\"item\\\"\\r\\n            *ngFor=\\\"let item of raffle?.product?.images; let i = index\\\" (click)=\\\"selectionIndex = i\\\"></div>\\r\\n        </div>\\r\\n        <div class=\\\"mainImage\\\">\\r\\n          <img [src]=\\\"raffle?.product?.images[selectionIndex]\\\" alt=\\\"\\\">\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"col-sm-6\\\">\\r\\n      <h3 class=\\\"my-3\\\">{{raffle?.name}}</h3>\\r\\n\\r\\n      <small class=\\\"text-sm\\\"\\r\\n        innerHTML=\\\"{{(raffle?.product?.description | markdown) || 'No Description for this raffle'}}\\\"></small>\\r\\n\\r\\n      <div class=\\\"more-detail\\\">\\r\\n        <hr>\\r\\n        <span class=\\\"my-3 price\\\">\\r\\n          <h5 class=\\\"text-lg text-secondary\\\">{{raffle.price | ccurrency}}</h5>\\r\\n          <div class=\\\"mr-4\\\"></div>\\r\\n          <div class=\\\"text-lg text-danger no-good\\\">{{raffle.retailPrice | ccurrency}}</div>\\r\\n        </span>\\r\\n\\r\\n        <h6 class=\\\"my-2\\\" *ngIf=\\\"!isEnded\\\">\\r\\n          {{deadline?.days || 'dias' }}\\r\\n          {{deadline?.days ? 'dias': ''}}\\r\\n          {{deadline?.hours || '' }}\\r\\n          {{deadline?.hours ? 'hrs': ''}}\\r\\n          {{deadline?.minutes || '' }} mins\\r\\n          {{deadline?.seconds || '' }} segundos restantes</h6>\\r\\n\\r\\n        <!-- <small class=\\\"mb-4\\\">{{entriesLeft}} raffle entires left</small> -->\\r\\n        <app-progress-bar class=\\\"mt-1 mb-1\\\" text=\\\"{{entriesLeft}} raffle entries left\\\" [value]=\\\"entriesLeft\\\">\\r\\n        </app-progress-bar>\\r\\n\\r\\n\\r\\n        <span class=\\\"my-3 price\\\">\\r\\n          <button class=\\\"btn btn-primary\\\" [disabled]=\\\"isEnded\\\" (click)=\\\"scrollTo('play-raffle')\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"PickNumbers\\\" angularticsLabel=\\\"PlayNowButton\\\" [angularticsCategory]=\\\"'RaffleItemPage'\\\">Jogue agora</button>\\r\\n          <div class=\\\"mr-4\\\"></div>\\r\\n          <button class=\\\"btn btn-primary\\\" [disabled]=\\\"isEnded\\\" [ngbPopover]=\\\"popContent\\\" [popoverTitle]=\\\"popTitle\\\"\\r\\n            [autoClose]=\\\"'outside'\\\" #popover=\\\"ngbPopover\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"PickNumbers\\\" angularticsLabel=\\\"LuckyDipButton\\\" [angularticsCategory]=\\\"'RaffleItemPage'\\\">\\r\\n            Seleção aleatória\\r\\n          </button>\\r\\n        </span>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div id=\\\"play-raffle\\\" class=\\\"pt-3 my-5\\\" *ngIf=\\\"!isEnded\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md-8 col-lg-8\\\">\\r\\n        <app-draw-picker *ngIf=\\\"entries\\\" [entries]=\\\"entries\\\" [max]=\\\"raffle.maxOptions\\\"\\r\\n          [maxSelection]=\\\"raffle.maxUserSelection\\\" [userSelection]=\\\"userEntries\\\" (emitEntries)=\\\"userEntries = $event\\\">\\r\\n        </app-draw-picker>\\r\\n      </div>\\r\\n      <div class=\\\"col-md-4 col-lg-4\\\">\\r\\n        <!-- TrustBox widget - Micro Review Count -->\\r\\n        <div class=\\\"trustpilot-widget\\\" data-locale=\\\"en-GB\\\" data-template-id=\\\"5419b6a8b0d04a076446a9ad\\\"\\r\\n          data-businessunit-id=\\\"5d0784964b7e5500018c5188\\\" data-style-height=\\\"24px\\\" data-style-width=\\\"100%\\\"\\r\\n          data-theme=\\\"light\\\"> </div> <!-- End TrustBox widget -->\\r\\n        <div class=\\\"tutorial\\\">\\r\\n          <h4 class=\\\"mb-3\\\">Como jogar</h4>\\r\\n          <ul>\\r\\n            <li>Você pode selecionar até <b>{{raffle.maxUserSelection}}números</b> dessa rifa</li>\\r\\n            <li>Os números que já foram utilizados aparecerão como <span class=\\\"text-secondary p-1 prev-selected\\\">18</span>\\r\\n            </li>\\r\\n            <li>Os números digitados anteriormente aparecerão como <span\\r\\n                class=\\\"bg-danger text-light p-1 prev-user-selected\\\">23</span>\\r\\n            </li>\\r\\n            <li>Seus números atualmente selecionados aparecerão como<span\\r\\n                class=\\\"bg-secondary text-light p-1 current-user-selected\\\">23</span>\\r\\n            </li>\\r\\n            <li>selecionados<span class=\\\"btn-sm btn btn-primary\\\">Confirme e pague!</span> botão para pagar pelo seu número selecionado\\r\\n              números e digite o sorteio</li>\\r\\n            <li>Boa sorte!</li>\\r\\n          </ul>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <button class=\\\"btn btn-lg mt-2 ml-auto btn-primary\\\" [disabled]=\\\"!hasNewEntries\\\" (click)=\\\"verifyPay()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"VerifyPay\\\" angularticsLabel=\\\"VerifyPayButton\\\" [angularticsCategory]=\\\"'RaffleItemPage'\\\">Confirme e pague! <i class=\\\"fa fa-shopping-cart\\\"></i></button>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"item-tabs\\\">\\r\\n    <ngb-tabset>\\r\\n      <ngb-tab title=\\\"Descrição\\\">\\r\\n        <ng-template ngbTabContent>\\r\\n          <p class=\\\"p-4\\\" innerHTML=\\\"{{(raffle.description | markdown) || 'Nenhuma descrição definida para este produto'}}\\\"></p>\\r\\n        </ng-template>\\r\\n      </ngb-tab>\\r\\n      <ngb-tab title=\\\"Termos\\\">\\r\\n        <ng-template ngbTabContent>\\r\\n          <p class=\\\"p-4\\\" innerHTML=\\\"{{(raffle.terms | markdown) || 'Nenhum termo definido para este sorteio'}}\\\">\\r\\n          </p>\\r\\n\\r\\n        </ng-template>\\r\\n      </ngb-tab>\\r\\n    </ngb-tabset>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\\r\\n<ng-template #popContent>\\r\\n  <p>Escolha quantos números de mergulho de sorte você deseja. Este sorteio tem no máximo<span class=\\\"badge badge-success\\\">\\r\\n      {{raffle.maxUserSelection}}</span> seleção</p>\\r\\n  <form-field suffix=\\\"true\\\" size=\\\"lg\\\">\\r\\n    <input type=\\\"number\\\" inputRef min=\\\"0\\\" [max]=\\\"raffle.maxUserSelection\\\" [(ngModel)]=\\\"luckyDipSelection\\\">\\r\\n    <button suffix class=\\\"btn btn-sm\\\" (click)=\\\"doLuckyDip()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"GetLuckyDipNumbers\\\" angularticsLabel=\\\"LuckyDipGoButton\\\" [angularticsCategory]=\\\"'RaffleItemLuckyDip'\\\">Go</button>\\r\\n  </form-field>\\r\\n  <hr>\\r\\n  <div class=\\\"d-block\\\">\\r\\n    <div class=\\\"badge badge-primary badge-lg mx-2 p-1 txt-lg\\\" *ngFor=\\\"let item of userEntries\\\">{{item}}</div>\\r\\n  </div>\\r\\n\\r\\n  <button *ngIf=\\\"userEntries\\\" class=\\\"btn mt-3 ml-auto btn-primary\\\" [disabled]=\\\"!hasNewEntries\\\"\\r\\n    (click)=\\\"verifyPay()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"VerifyPay\\\" angularticsLabel=\\\"VerifyPayButton\\\" [angularticsCategory]=\\\"'RaffleItemLuckyDip'\\\">Verify and\\r\\n    Pay! <i class=\\\"fa fa-shopping-cart\\\"></i></button>\\r\\n</ng-template>\\r\\n<ng-template #popTitle>Seleção aleatória</ng-template>\\r\\n\"","module.exports = \":host .image-wrapper {\\n  display: flex; }\\n  :host .image-wrapper .images {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 0 10px; }\\n  :host .image-wrapper .images .img {\\n      width: 60px;\\n      height: 60px;\\n      border: 1px solid grey;\\n      background-size: contain !important;\\n      margin: 3px 0; }\\n  :host .image-wrapper .images .img.active {\\n        background-blend-mode: overlay;\\n        background-color: rgba(0, 0, 0, 0.5); }\\n  :host .image-wrapper .mainImage img {\\n    max-width: 100%; }\\n  :host .price {\\n  display: flex; }\\n  :host .price .no-good {\\n    text-decoration: line-through; }\\n  :host .more-detail {\\n  width: 75%; }\\n  :host #play-raffle .tutorial {\\n  background: #f2f2f2;\\n  padding: 15px 10px;\\n  border-radius: 4px;\\n  font-size: 14px; }\\n  :host #play-raffle .tutorial ul {\\n    -webkit-padding-start: 17px;\\n            padding-inline-start: 17px; }\\n  :host #play-raffle .tutorial ul li {\\n      margin: 10px 0; }\\n  :host #play-raffle .tutorial ul li .prev-user-selected,\\n      :host #play-raffle .tutorial ul li .prev-selected,\\n      :host #play-raffle .tutorial ul li .current-user-selected {\\n        width: 25px;\\n        height: 25px;\\n        border-radius: 50%;\\n        font-size: 14px;\\n        margin-left: 5px; }\\n  :host #play-raffle .tutorial ul li .prev-selected {\\n        background: #d3d3d3; }\\n  :host ::ng-deep .tab-content {\\n  border: 1px solid #dde2e5;\\n  border-top: none;\\n  border-radius: 4px;\\n  border-top-left-radius: 0;\\n  border-top-right-radius: 0; }\\n  :host .txt-lg {\\n  font-size: 16px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9wYWdlcy9iYXNlL2xpdmUvY29tcG9uZW50cy9saXZlLWl0ZW0vQzpcXFVzZXJzXFxVc2VyXFxEZXNrdG9wXFxyaWZmYS1CcmFzaWwtZnJvbnQvc3JjXFxwYWdlc1xcYmFzZVxcbGl2ZVxcY29tcG9uZW50c1xcbGl2ZS1pdGVtXFxsaXZlLWl0ZW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFSSxhQUFhLEVBQUE7RUFGakI7SUFLTSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGVBQWUsRUFBQTtFQVByQjtNQVVRLFdBQVc7TUFDWCxZQUFZO01BQ1osc0JBQXNCO01BQ3RCLG1DQUFtQztNQUNuQyxhQUFhLEVBQUE7RUFkckI7UUFpQlUsOEJBQThCO1FBQzlCLG9DQUE0QixFQUFBO0VBbEJ0QztJQXlCUSxlQUFlLEVBQUE7RUF6QnZCO0VBK0JJLGFBQWEsRUFBQTtFQS9CakI7SUFrQ00sNkJBQTZCLEVBQUE7RUFsQ25DO0VBdUNJLFVBQVUsRUFBQTtFQXZDZDtFQTZDTSxtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtFQUNsQixlQUFlLEVBQUE7RUFoRHJCO0lBbURRLDJCQUEwQjtZQUExQiwwQkFBMEIsRUFBQTtFQW5EbEM7TUFzRFUsY0FBYyxFQUFBO0VBdER4Qjs7O1FBMkRZLFdBQVc7UUFDWCxZQUFZO1FBQ1osa0JBQWtCO1FBQ2xCLGVBQWU7UUFDZixnQkFBZ0IsRUFBQTtFQS9ENUI7UUFtRVksbUJBQW1CLEVBQUE7RUFuRS9CO0VBNkVNLHlCQUF5QjtFQUN6QixnQkFBZ0I7RUFDaEIsa0JBQWtCO0VBQ2xCLHlCQUF5QjtFQUN6QiwwQkFBMEIsRUFBQTtFQWpGaEM7RUFzRkksZUFBZSxFQUFBIiwiZmlsZSI6InNyYy9wYWdlcy9iYXNlL2xpdmUvY29tcG9uZW50cy9saXZlLWl0ZW0vbGl2ZS1pdGVtLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIC5pbWFnZS13cmFwcGVyIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcblxyXG4gICAgLmltYWdlcyB7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgIHBhZGRpbmc6IDAgMTBweDtcclxuXHJcbiAgICAgIC5pbWcge1xyXG4gICAgICAgIHdpZHRoOiA2MHB4O1xyXG4gICAgICAgIGhlaWdodDogNjBweDtcclxuICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBncmV5O1xyXG4gICAgICAgIGJhY2tncm91bmQtc2l6ZTogY29udGFpbiAhaW1wb3J0YW50O1xyXG4gICAgICAgIG1hcmdpbjogM3B4IDA7XHJcblxyXG4gICAgICAgICYuYWN0aXZlIHtcclxuICAgICAgICAgIGJhY2tncm91bmQtYmxlbmQtbW9kZTogb3ZlcmxheTtcclxuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoYmxhY2ssIDAuNSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLm1haW5JbWFnZSB7XHJcbiAgICAgIGltZyB7XHJcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAucHJpY2Uge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuXHJcbiAgICAubm8tZ29vZCB7XHJcbiAgICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLm1vcmUtZGV0YWlsIHtcclxuICAgIHdpZHRoOiA3NSU7XHJcbiAgfVxyXG5cclxuXHJcbiAgI3BsYXktcmFmZmxlIHtcclxuICAgIC50dXRvcmlhbCB7XHJcbiAgICAgIGJhY2tncm91bmQ6ICNmMmYyZjI7XHJcbiAgICAgIHBhZGRpbmc6IDE1cHggMTBweDtcclxuICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgICBmb250LXNpemU6IDE0cHg7XHJcblxyXG4gICAgICB1bCB7XHJcbiAgICAgICAgcGFkZGluZy1pbmxpbmUtc3RhcnQ6IDE3cHg7XHJcblxyXG4gICAgICAgIGxpIHtcclxuICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xyXG5cclxuICAgICAgICAgIC5wcmV2LXVzZXItc2VsZWN0ZWQsXHJcbiAgICAgICAgICAucHJldi1zZWxlY3RlZCxcclxuICAgICAgICAgIC5jdXJyZW50LXVzZXItc2VsZWN0ZWQge1xyXG4gICAgICAgICAgICB3aWR0aDogMjVweDtcclxuICAgICAgICAgICAgaGVpZ2h0OiAyNXB4O1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAucHJldi1zZWxlY3RlZCB7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNkM2QzZDM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgOjpuZy1kZWVwIHtcclxuICAgIC50YWItY29udGVudCB7XHJcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGUyZTU7XHJcbiAgICAgIGJvcmRlci10b3A6IG5vbmU7XHJcbiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcclxuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAudHh0LWxnIHtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICB9XHJcbn1cclxuIl19 */\"","import { Component, Injector, OnDestroy, OnInit } from '@angular/core';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport {\r\n  FireLoopRef,\r\n  RaffleDraw,\r\n  RaffleDrawApi,\r\n  RaffleEntry,\r\n  RealTime\r\n} from '../../../../../common/sdk';\r\nimport { AuthComponent } from '../../../../../modules/auth/components/auth/auth.component';\r\nimport { PaymentComponent } from '../payment/payment.component';\r\n\r\n@Component({\r\n  selector: 'app-live-item',\r\n  templateUrl: './live-item.component.html',\r\n  styleUrls: ['./live-item.component.scss']\r\n})\r\nexport class LiveItemComponent extends Extender implements OnInit, OnDestroy {\r\n  public raffle: RaffleDraw = new RaffleDraw();\r\n  public selectionIndex: number = 0;\r\n  public timeElapsed: number;\r\n  public entries: RaffleEntry[];\r\n  public entriesAsNumberArray: number[];\r\n  public userEntries: number[] = [];\r\n  public raffleEntriesRef: FireLoopRef<RaffleEntry>;\r\n  public entriesLeft: number;\r\n  public timerInterval: any;\r\n  public deadline: {\r\n    seconds: number;\r\n    minutes: number;\r\n    hours: number;\r\n    days: number;\r\n  };\r\n  public luckyDipSelection: number;\r\n  private luckyDipNumbers: number[] = [];\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _rt: RealTime,\r\n    private _raffleApi: RaffleDrawApi\r\n  ) {\r\n    super(injector);\r\n    this._rt.onReady().subscribe(() => {});\r\n  }\r\n\r\n  public get isEnded() {\r\n    return new Date(this.raffle.endDate) < new Date();\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.activatedRoute.params.subscribe((param) => this.getRaffle(param.id));\r\n    this.raffleEntriesRef = this._rt.FireLoop.ref<RaffleEntry>(RaffleEntry);\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    clearInterval(this.timerInterval);\r\n    this._rt.onDisconnect();\r\n  }\r\n\r\n  public getRaffle(id: string): void {\r\n    this._raffleApi\r\n      .findById(id, {\r\n        where: { isDeleted: false },\r\n        include: ['product', 'raffleEntries']\r\n      })\r\n      .subscribe((data: RaffleDraw) => {\r\n        this.raffle = data;\r\n        this.entriesLeft = Math.round(\r\n          this.raffle.maxOptions - this.raffle.raffleEntries.length\r\n        );\r\n\r\n        this.setupTimer(this.raffle);\r\n        this.raffleEntriesRef\r\n          .on('change', {\r\n            where: { isDeleted: false, raffleDrawId: this.raffle.id }\r\n          })\r\n          .subscribe((rafEntry: RaffleEntry[]) => {\r\n            this.entries = rafEntry;\r\n            this.entriesAsNumberArray = rafEntry.map(\r\n              (entry) => entry.entryNumber\r\n            );\r\n          });\r\n      });\r\n  }\r\n\r\n  public scrollTo(item: string): void {\r\n    const element = document.getElementById(item);\r\n    if (element) {\r\n      element.scrollIntoView({\r\n        behavior: 'smooth',\r\n        block: 'start',\r\n        inline: 'start'\r\n      });\r\n    }\r\n  }\r\n\r\n  public verifyPay() {\r\n    if (!this.loggedIn) {\r\n      this.dialog.open(AuthComponent, { data: { size: 'md', form: 'login' } });\r\n    } else {\r\n      this.dialog\r\n        .openAlert({\r\n          data: {\r\n            config: {\r\n              body: ` Parabéns Você escolheu os números para ${this.raffle.name} Rifa`,\r\n              footer: `<h4> \r\n                \r\n                 </h4>`\r\n            },\r\n            buttons: {\r\n              buttons: [\r\n                {\r\n                  color: 'outline-danger',\r\n                  text: 'Cancelar',\r\n                  eventname: 'close'\r\n                },\r\n                {\r\n                  color: 'secondary',\r\n                  text: 'Pagar',\r\n                  eventname: 'payment'\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        })\r\n        .afterClosed.subscribe((data) => {\r\n          if (data === 'payment') {\r\n            const raffleEntries = this.userEntries\r\n              .filter(\r\n                (obj) =>\r\n                  this.entries\r\n                    .map((entry) => entry.entryNumber)\r\n                    .indexOf(obj) === -1\r\n              )\r\n              .map(\r\n                (entry) =>\r\n                  new RaffleEntry({\r\n                    entryNumber: entry,\r\n                    accountId: this.currentUser.id,\r\n                    isLuckyDip: this.luckyDipNumbers.includes(entry)\r\n                  })\r\n              );\r\n            this.dialog\r\n              .open(PaymentComponent, {\r\n                data: { entries: raffleEntries, raffle: this.raffle }\r\n              })\r\n              .afterClosed.subscribe((payment) => {\r\n                if (payment === 'success') {\r\n                  this._raffleApi\r\n                    .createManyRaffleEntries(this.raffle.id, raffleEntries)\r\n                    .subscribe(() => {\r\n                      // this.userEntries = [];\r\n                      this.luckyDipNumbers = [];\r\n                    });\r\n                }\r\n              });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  public doLuckyDip(): void {\r\n    if (this.luckyDipSelection <= this.raffle.maxUserSelection) {\r\n      this.userEntries = [];\r\n      let i = 1;\r\n      while (i <= this.luckyDipSelection) {\r\n        const number = this.generateRandomNumber(this.raffle.maxOptions);\r\n        if (\r\n          !this.userEntries.includes(number) &&\r\n          !this.entriesAsNumberArray.includes(number)\r\n        ) {\r\n          this.luckyDipNumbers.push(number);\r\n          this.userEntries.push(number);\r\n          i++;\r\n        }\r\n      }\r\n    }\r\n    // for (let index = 0; index < this.luckyDipSelection; index++) {\r\n    //   this.userEntries.push(this.generateRandomNumber(this.raffle.maxOptions))\r\n    // }\r\n  }\r\n\r\n  public get hasNewEntries(): boolean {\r\n    if (this.userEntries) {\r\n      const data = this.userEntries.filter(\r\n        (obj) =>\r\n          this.entries.map((entry) => entry.entryNumber).indexOf(obj) === -1\r\n      );\r\n      return data.length > 0 ? true : false;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private setupTimer(item: RaffleDraw): void {\r\n    const deadlineTime = new Date(item.endDate).getTime();\r\n    const currentTime = new Date().getTime();\r\n    const interval = 1000;\r\n    let duration;\r\n\r\n    duration = deadlineTime - currentTime;\r\n\r\n    this.timerInterval = setInterval(() => {\r\n      duration = Math.abs(duration - interval);\r\n      this.deadline = {\r\n        seconds: Math.floor((duration / 1000) % 60),\r\n        minutes: Math.floor((duration / 1000 / 60) % 60),\r\n        hours: Math.floor((duration / (1000 * 60 * 60)) % 24),\r\n        days: Math.floor(duration / (1000 * 60 * 60 * 24))\r\n      };\r\n    }, interval);\r\n  }\r\n\r\n  private generateRandomNumber(end) {\r\n    return Math.floor(Math.random() * end) + 1 ;\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"container mt-5\\\">\\r\\n  <app-spinner [isLoading]=\\\"loading\\\">\\r\\n    <ng-container *ngIf=\\\"raffles && raffles.length > 0\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-sm-6 col-md-8\\\">\\r\\n          <app-search placeholder=\\\"Procurar Rifa\\\" (event)=\\\"doSearch($event)\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"SearchRaffle\\\" angularticsLabel=\\\"SearchBar\\\" [angularticsCategory]=\\\"'LiveRaffleSearch'\\\"></app-search>\\r\\n        </div>\\r\\n        <div class=\\\"col-sm-6 col-md-4\\\">\\r\\n          <!-- <app-filter [property]=\\\"raffles[0]\\\" (event)=\\\"sort($event)\\\"></app-filter> -->\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"col col-sm-12 col-md-4 col-lg-3\\\" *ngFor=\\\"let item of raffles | orderBy: '-endDate'\\\">\\r\\n          <app-product-card [raffle]=\\\"item\\\"></app-product-card>\\r\\n        </div>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n    <ng-container *ngIf=\\\"raffles && raffles.length < 1\\\">\\r\\n      <div class=\\\"jumbotron text-center\\\">\\r\\n        <h1 class=\\\"display-4\\\">Sem Jogos no Momento</h1>\\r\\n        <p class=\\\"lead\\\">Ainda não há sorteios disponíveis - verifique novamente em breve se há novas competições</p>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n\\r\\n  </app-spinner>\\r\\n</div>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvcGFnZXMvYmFzZS9saXZlL2NvbXBvbmVudHMvbGl2ZS9saXZlLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport { OrderByPipe } from '../../../../../common/pipes/order-by/order-by.pipe';\r\nimport { FireLoopRef, RaffleDraw, RaffleDrawApi, RealTime } from '../../../../../common/sdk';\r\n\r\n@Component({\r\n  providers: [OrderByPipe],\r\n  selector: 'app-live',\r\n  templateUrl: './live.component.html',\r\n  styleUrls: ['./live.component.scss']\r\n})\r\nexport class LiveComponent extends Extender implements OnInit {\r\n\r\n  public raffles: RaffleDraw[] = [];\r\n  public rafflesBackup: RaffleDraw[] | any = [];\r\n  public raffleRef: FireLoopRef<RaffleDraw>;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _rt: RealTime,\r\n    private orderBy: OrderByPipe\r\n  ) {\r\n    super(injector);\r\n    this._rt.onReady().subscribe(() => { });\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.raffleRef = this._rt.FireLoop.ref<RaffleDraw>(RaffleDraw);\r\n    this.raffleRef.on('change', {\r\n      where: { isDeleted: false, endDate: { gt: new Date() }, startDate: { lt: new Date() } }, include: ['product', 'raffleEntries']\r\n    }).subscribe((data: RaffleDraw[]) =>\r\n      this.rafflesBackup = this.raffles = data\r\n    );\r\n  }\r\n\r\n  public doSearch(val: string): void {\r\n\r\n    if (val && val.trim() !== '') {\r\n      this.raffles = this.rafflesBackup.filter((raffle) => raffle.name.toLowerCase().indexOf(val.toLowerCase()) !== -1);\r\n    } else {\r\n      this.raffles = [...this.rafflesBackup];\r\n    }\r\n  }\r\n\r\n  public sort(prop: string, by: string) {\r\n    // sort by asc and desc and by property\r\n    this.raffles = this.orderBy.transform(this.raffles, by + prop);\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"wrapper m-4 p-2\\\">\\r\\n  <h4 class=\\\"mb-3\\\">Pague agora para garantir os números</h4>\\r\\n\\r\\n  <div class=\\\"item-details mt-4 p-4 text-secondary card\\\">\\r\\n    <h6>\\r\\n      Você escolheu <b>{{entries.length}}</b> números neste sorteio.\\r\\n      <br> Seu total é <b> {{amount | ccurrency}}</b>\\r\\n    </h6>\\r\\n\\r\\n    <div class=\\\"discount text-danger\\\" *ngIf=\\\"hasInviteDiscount\\\">\\r\\n      <hr>\\r\\n      <ng-container *ngIf=\\\"!discountClaimed\\\">\\r\\n        <h6>Você tem um desconto de R$ 5, deseja reivindicá-lo?</h6>\\r\\n        <button type=\\\"button\\\" (click)=\\\"claimDiscount()\\\" class=\\\"btn btn-secondary mr-4\\\" [btnStatus]=\\\"loading\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"ClaimDiscount\\\" angularticsLabel=\\\"DiscountButton\\\" [angularticsCategory]=\\\"'ClaimDiscountSection'\\\">\\r\\n          Reivindicar desconto\\r\\n        </button>\\r\\n      </ng-container>\\r\\n      <ng-container *ngIf=\\\"discountClaimed\\\">\\r\\n        <h6 class=\\\"text-danger\\\">Você reivindicou seu desconto!</h6>\\r\\n      </ng-container>\\r\\n\\r\\n\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <app-progress-bar class=\\\"mt-1 mb-1\\\" [value]=\\\"(progress/180000) * 100\\\">\\r\\n  </app-progress-bar>\\r\\n\\r\\n  <div class=\\\"stripe-image my-3\\\">\\r\\n    <img src=\\\"./assets/images/stripe.png\\\" alt=\\\"\\\">\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <form (ngSubmit)=\\\"buy()\\\" #form=\\\"ngForm\\\">\\r\\n    <form-field label=\\\"Nome\\\">\\r\\n      <input inputRef [(ngModel)]=\\\"name\\\" name=\\\"name\\\" placeholder=\\\"Jane Doe\\\">\\r\\n    </form-field>\\r\\n\\r\\n    <div class=\\\"card-wrapper mt-3 mb-5\\\">\\r\\n      <label>Digite os detalhes do cartão</label>\\r\\n      <div id=\\\"card-element\\\"></div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"text-right\\\">\\r\\n      <button type=\\\"submit\\\" class=\\\"btn btn-secondary mr-4\\\" [btnStatus]=\\\"loading\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"RafflePay\\\" angularticsLabel=\\\"RafflePayButton\\\" [angularticsCategory]=\\\"'RafflePayPopUp'\\\">\\r\\n        Pagar\\r\\n      </button>\\r\\n      <button type=\\\"button\\\" class=\\\"btn btn-outline-primary\\\" (click)=\\\"closeModal()\\\" angulartics2On=\\\"click\\\" angularticsAction=\\\"RaffleCancel\\\" angularticsLabel=\\\"RaffleCancelButton\\\" [angularticsCategory]=\\\"'RafflePayPopUp'\\\">\\r\\n        Cancelar\\r\\n      </button>\\r\\n    </div>\\r\\n  </form>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n<!-- <label>Enter Address details</label>\\r\\n    <form-field>\\r\\n      <input inputRef [(ngModel)]=\\\"address.addressLine1\\\" name=\\\"name\\\" placeholder=\\\"Address line 1\\\">\\r\\n    </form-field>\\r\\n    <form-field>\\r\\n      <input inputRef [(ngModel)]=\\\"address.addressLine2\\\" name=\\\"name\\\" placeholder=\\\"Address line 2\\\">\\r\\n    </form-field>\\r\\n    <form-field>\\r\\n      <input inputRef [(ngModel)]=\\\"address.city\\\" name=\\\"name\\\" placeholder=\\\"City\\\">\\r\\n    </form-field>\\r\\n    <form-field>\\r\\n      <input inputRef [(ngModel)]=\\\"address.postCode\\\" name=\\\"name\\\" placeholder=\\\"Post Code\\\">\\r\\n    </form-field> -->\\r\\n\"","module.exports = \":host .stripe-image {\\n  margin-left: -20px; }\\n  :host .stripe-image img {\\n    max-width: 50%; }\\n  :host #card-element {\\n  display: block;\\n  border: 1px solid #ced4da;\\n  border-radius: 4px; }\\n  :host .StripeElement {\\n  box-sizing: border-box;\\n  height: 40px;\\n  padding: 10px 12px;\\n  border: 1px solid transparent;\\n  border-radius: 4px;\\n  background-color: white;\\n  transition: box-shadow 150ms ease; }\\n  :host .StripeElement--focus {\\n  box-shadow: 0 1px 3px 0 #cfd7df; }\\n  :host .StripeElement--invalid {\\n  border-color: #fa755a; }\\n  :host .StripeElement--webkit-autofill {\\n  background-color: #fefde5 !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9wYWdlcy9iYXNlL2xpdmUvY29tcG9uZW50cy9wYXltZW50L0M6XFxVc2Vyc1xcVXNlclxcRGVza3RvcFxccmlmZmEtQnJhc2lsLWZyb250L3NyY1xccGFnZXNcXGJhc2VcXGxpdmVcXGNvbXBvbmVudHNcXHBheW1lbnRcXHBheW1lbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHSSxrQkFBa0IsRUFBQTtFQUh0QjtJQU1NLGNBQWMsRUFBQTtFQU5wQjtFQVdJLGNBQWM7RUFDZCx5QkFBeUI7RUFDekIsa0JBQWtCLEVBQUE7RUFidEI7RUFrQkksc0JBQXNCO0VBRXRCLFlBQVk7RUFFWixrQkFBa0I7RUFFbEIsNkJBQTZCO0VBQzdCLGtCQUFrQjtFQUNsQix1QkFBdUI7RUFJdkIsaUNBQWlDLEVBQUE7RUE5QnJDO0VBa0NJLCtCQUErQixFQUFBO0VBbENuQztFQXNDSSxxQkFBcUIsRUFBQTtFQXRDekI7RUEwQ0ksb0NBQW9DLEVBQUEiLCJmaWxlIjoic3JjL3BhZ2VzL2Jhc2UvbGl2ZS9jb21wb25lbnRzL3BheW1lbnQvcGF5bWVudC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuXHJcbiAgLnN0cmlwZS1pbWFnZSB7XHJcbiAgICBtYXJnaW4tbGVmdDogLTIwcHg7XHJcblxyXG4gICAgaW1nIHtcclxuICAgICAgbWF4LXdpZHRoOiA1MCU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAjY2FyZC1lbGVtZW50IHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NlZDRkYTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIC8vIHBhZGRpbmc6IDNweCAxMHB4O1xyXG4gIH1cclxuXHJcbiAgLlN0cmlwZUVsZW1lbnQge1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuXHJcbiAgICBoZWlnaHQ6IDQwcHg7XHJcblxyXG4gICAgcGFkZGluZzogMTBweCAxMnB4O1xyXG5cclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcblxyXG4gICAgLy8gYm94LXNoYWRvdzogMCAxcHggM3B4IDAgI2U2ZWJmMTtcclxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYm94LXNoYWRvdyAxNTBtcyBlYXNlO1xyXG4gICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAxNTBtcyBlYXNlO1xyXG4gIH1cclxuXHJcbiAgLlN0cmlwZUVsZW1lbnQtLWZvY3VzIHtcclxuICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCAwICNjZmQ3ZGY7XHJcbiAgfVxyXG5cclxuICAuU3RyaXBlRWxlbWVudC0taW52YWxpZCB7XHJcbiAgICBib3JkZXItY29sb3I6ICNmYTc1NWE7XHJcbiAgfVxyXG5cclxuICAuU3RyaXBlRWxlbWVudC0td2Via2l0LWF1dG9maWxsIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZWZkZTUgIWltcG9ydGFudDtcclxuICB9XHJcbn1cclxuIl19 */\"","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport { CustomCurrencyPipe } from '../../../../../common/pipes/currency/custom-currency.pipe';\r\nimport {\r\n  Invitation,\r\n  InvitationApi,\r\n  RaffleDraw,\r\n  RaffleEntry,\r\n  RaffleEntryApi\r\n} from '../../../../../common/sdk';\r\nimport { PaymentApi } from '../../../../../common/sdk/services/custom/Payment';\r\nimport { environment } from '../../../../../environments/environment';\r\nimport { DialogConfig } from '../../../../../modules/dialog/helpers/dialog-config';\r\nimport { DialogRef } from '../../../../../modules/dialog/helpers/dialog-ref';\r\n\r\nconst stripe = (window as any).Stripe(environment.STRIPE_PUB_KEY);\r\nconst elements = stripe.elements();\r\nconst cardElement = elements.create('card', {\r\n  style: {\r\n    base: {\r\n      // iconColor: '#666EE8',\r\n      color: '#31325F',\r\n      fontWeight: 300,\r\n      fontFamily: '\"Montserrat\", Helvetica, sans-serif',\r\n      fontSize: '18px',\r\n      '::placeholder': {\r\n        color: '#CFD7E0'\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\n@Component({\r\n  providers: [CustomCurrencyPipe],\r\n  selector: 'app-payment',\r\n  templateUrl: './payment.component.html',\r\n  styleUrls: ['./payment.component.scss']\r\n})\r\nexport class PaymentComponent extends Extender implements OnInit {\r\n  public name: string;\r\n  public address: any = null;\r\n  public cardElement = cardElement;\r\n  public raffleEntries: number[];\r\n  public raffle: RaffleDraw;\r\n  @ViewChild('form') private form: NgForm;\r\n  public hasInviteDiscount: boolean;\r\n  public amount: number;\r\n  public discountClaimed: boolean;\r\n  public invite: Invitation;\r\n  public progress: number = 180000;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _dialogRef: DialogRef,\r\n    private _dialogConfig: DialogConfig,\r\n    private _paymentApi: PaymentApi,\r\n    private _raffleEntryApi: RaffleEntryApi,\r\n    private _invitationApi: InvitationApi,\r\n    private _currency: CustomCurrencyPipe\r\n  ) {\r\n    super(injector);\r\n  }\r\n\r\n  public get entries() {\r\n    return this._dialogConfig.data.entries;\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.cardElement.mount('#card-element');\r\n    this.name =\r\n      this.currentUser.contact.firstName +\r\n      ' ' +\r\n      this.currentUser.contact.lastName;\r\n    this.raffle = this._dialogConfig.data.raffle;\r\n    this.raffleEntries = this._dialogConfig.data.entries.map(\r\n      (e) => e.entryNumber\r\n    );\r\n    this.getInvites();\r\n    this.amount = this.raffleEntries.length * this.raffle.price;\r\n\r\n    setInterval(() => {\r\n      if (this.progress <= 0) {\r\n        this.progress = 180000;\r\n      }\r\n      this.progress = this.progress - 1000;\r\n    }, 1000);\r\n  }\r\n\r\n  public buy() {\r\n    this.loading = true;\r\n    this.checkRaffleEntriesB4Payment().then((isTaken) => {\r\n      if (isTaken) {\r\n        this.toastr.warning(\r\n          'Your Raffle Entries have already been taken, please select new raffle numbers'\r\n        );\r\n        this._dialogRef.close();\r\n        this.loading = false;\r\n      } else {\r\n        this._makePayment();\r\n      }\r\n    });\r\n  }\r\n\r\n  public claimDiscount() {\r\n    this.discountClaimed = true;\r\n    this.amount = this._getDiscount(\r\n      this.raffleEntries.length * this.raffle.price\r\n    );\r\n  }\r\n\r\n  private getInvites(): void {\r\n    this._invitationApi\r\n      .findOne({\r\n        where: {\r\n          or: [\r\n            {\r\n              hasSignedUp: true,\r\n              isDeleted: false,\r\n              receiverEmail: this.currentUser.email,\r\n              receiverClaimed: false\r\n            },\r\n            {\r\n              hasSignedUp: true,\r\n              isDeleted: false,\r\n              accountId: this.currentUser.id,\r\n              senderClaimed: false\r\n            }\r\n          ]\r\n        }\r\n      })\r\n      .subscribe((res: Invitation) => {\r\n        this.invite = res;\r\n        this.hasInviteDiscount = res.id ? true : false;\r\n\r\n        this._invitationApi\r\n          .findOne({\r\n            where: {\r\n              hasSignedUp: true,\r\n              isDeleted: false,\r\n              accountId: this.currentUser.id,\r\n              senderClaimed: true\r\n            }\r\n          })\r\n          .subscribe((resp) => {\r\n            if (resp) {\r\n              this.hasInviteDiscount = false;\r\n            }\r\n          });\r\n      });\r\n  }\r\n\r\n  private _getDiscount(amount): number {\r\n    return amount - 5;\r\n  }\r\n\r\n  private _makePayment() {\r\n    this._paymentApi\r\n      .start({\r\n        amount: this.amount * 100,\r\n        currency: 'gbp'\r\n      })\r\n      .subscribe(\r\n        (res) => {\r\n          stripe\r\n            .handleCardPayment(res.client_secret, this.cardElement, {\r\n              payment_method_data: {\r\n                billing_details: {\r\n                  name: this.name\r\n                }\r\n              },\r\n              receipt_email: this.currentUser.email\r\n            })\r\n            .then((result) => {\r\n              this.loading = false;\r\n              if (result.error) {\r\n                // Display error.message in your UI.\r\n                this.toastr.error(result.error.message);\r\n              } else {\r\n                this._updateInvite();\r\n                this._dialogRef.close('success');\r\n                this.dialog.openAlert({\r\n                  data: {\r\n                    config: {\r\n                      heading: 'Payment Successful',\r\n                      body: `You have successfuly made a payment of ${this._currency.transform(\r\n                        this.amount\r\n                      )} for ${this.raffleEntries.length} raffle tickets`\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n            });\r\n        },\r\n        (error: HttpErrorResponse) => {\r\n          this.toastr.error(error.message);\r\n        }\r\n      );\r\n  }\r\n\r\n  private _updateInvite() {\r\n    if (this.invite && this.invite.accountId === this.currentUser.id) {\r\n      this.invite.senderClaimed = true;\r\n    } else if (\r\n      this.invite &&\r\n      this.invite.receiverEmail === this.currentUser.email\r\n    ) {\r\n      this.invite.receiverClaimed = true;\r\n    }\r\n    this._invitationApi.upsert(this.invite).subscribe();\r\n  }\r\n\r\n  public closeModal(): void {\r\n    this._dialogRef.close();\r\n  }\r\n\r\n  private checkRaffleEntriesB4Payment() {\r\n    return new Promise((resolve, reject) => {\r\n      this._raffleEntryApi\r\n        .find({ where: { raffleDrawId: this.raffle.id, isDeleted: false } })\r\n        .subscribe((data: RaffleEntry[]) => {\r\n          const raffleEntry = !!data.find((e) =>\r\n            this.raffleEntries.includes(e.entryNumber)\r\n          );\r\n          resolve(raffleEntry);\r\n        });\r\n    });\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { NgbPopoverModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { MomentModule } from 'angular2-moment';\r\nimport { WinitCommonModule } from '../../../common/common.module';\r\nimport { AuthModule } from '../../../modules/auth/auth.module';\r\nimport { DialogModule } from '../../../modules/dialog/dialog.module';\r\nimport { FormFieldModule } from '../../../modules/form-field/form-field.module';\r\nimport { LiveItemComponent } from './components/live-item/live-item.component';\r\nimport { LiveComponent } from './components/live/live.component';\r\nimport { PaymentComponent } from './components/payment/payment.component';\r\nimport { MarkdownModule } from 'ngx-markdown';\r\n\r\n@NgModule({\r\n  declarations: [LiveComponent, LiveItemComponent, PaymentComponent],\r\n  entryComponents: [PaymentComponent],\r\n  imports: [\r\n    CommonModule,\r\n    WinitCommonModule,\r\n    FormsModule,\r\n    FormFieldModule,\r\n    MomentModule,\r\n    MarkdownModule.forChild(),\r\n    AuthModule,\r\n    NgbPopoverModule,\r\n    DialogModule.forRoot(),\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: LiveComponent\r\n      },\r\n      {\r\n        path: ':id',\r\n        component: LiveItemComponent\r\n      }\r\n    ])\r\n  ]\r\n})\r\nexport class LiveModule { }\r\n"],"sourceRoot":""}