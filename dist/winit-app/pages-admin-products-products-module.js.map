{"version":3,"sources":["webpack:///./src/pages/admin/products/components/add-product/add-product.component.html","webpack:///./src/pages/admin/products/components/add-product/add-product.component.scss","webpack:///./src/pages/admin/products/components/add-product/add-product.component.ts","webpack:///./src/pages/admin/products/components/products/products.component.html","webpack:///./src/pages/admin/products/components/products/products.component.scss","webpack:///./src/pages/admin/products/components/products/products.component.ts","webpack:///./src/pages/admin/products/products.module.ts"],"names":[],"mappings":";;;;;;;;;AAAA,wEAAwE,kCAAkC,0iBAA0iB,4CAA4C,+KAA+K,kpB;;;;;;;;;;;ACA/2B,4DAA4D,mBAAmB,uBAAuB,EAAE,kDAAkD,sBAAsB,yBAAyB,oBAAoB,EAAE,uDAAuD,yBAAyB,aAAa,cAAc,oBAAoB,+BAA+B,mBAAmB,oBAAoB,8BAA8B,0BAA0B,qCAAqC,mBAAmB,EAAE,+CAA+C,mrD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAhgB;AACE;AAC/B;AACsB;AAChB;AACc;AACM;AACF;AACM;AACa;AACN;AAO7E;IAAyC,6EAAQ;IAU/C,6BACY,QAAkB,EACpB,KAAiB,EACjB,UAAqB,EACrB,aAA2B,EAC3B,WAAuB;QALjC,YAOE,kBAAM,QAAQ,CAAC,SAChB;QAPW,cAAQ,GAAR,QAAQ,CAAU;QACpB,WAAK,GAAL,KAAK,CAAY;QACjB,gBAAU,GAAV,UAAU,CAAW;QACrB,mBAAa,GAAb,aAAa,CAAc;QAC3B,iBAAW,GAAX,WAAW,CAAY;QAb1B,eAAS,GAAW,IAAI,CAAC;QACzB,aAAO,GAAY,IAAI,mDAAO,EAAE,CAAC;QACjC,YAAM,GAAkC,EAAE,CAAC;QAC3C,WAAK,GAAW,EAAE,CAAC;QAElB,YAAM,GAAM,qEAAW,CAAC,MAAM,CAAC,QAAQ,SAAI,qEAAW,CAAC,MAAM,CAAC,WAAW,0BAAuB,CAAC;;IAWzG,CAAC;IAEM,sCAAQ,GAAf;QAAA,iBAMC;QALC,IAAM,IAAI,GAAY,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC;QAC9C,IAAI,IAAI,EAAE;YACR,IAAI,CAAC,OAAO,GAAG,6CAAS,CAAC,IAAI,CAAC,CAAC;SAChC;QACD,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,UAAC,KAAK,IAAK,YAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAA7C,CAA6C,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACjH,CAAC;IAEM,sCAAQ,GAAf,UAAgB,KAAK;QAArB,iBASC;QARC,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,IAAM,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACpD,SAAS,CAAC,OAAO,CAAC,UAAC,IAAI;gBACrB,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACtB,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;YACH,OAAO,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC;SAC3B;IACH,CAAC;IAEM,2CAAa,GAApB,UAAqB,IAAU;QAA/B,iBAQC;QAPC,IAAM,MAAM,GAAe,IAAI,UAAU,EAAE,CAAC;QAC5C,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;YAC9B,IAAI,KAAI,CAAC,OAAO,KAAK,IAAI,IAAI,KAAI,CAAC,OAAO,KAAK,SAAS,EAAE;gBACvD,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC;aACvD;QACH,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IAC7B,CAAC;IAEM,kCAAI,GAAX;QAAA,iBAYC;QAXC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAM,QAAQ,GAAa,IAAI,QAAQ,EAAE,CAAC;QAC1C,IAAM,SAAS,GAAM,IAAI,CAAC,MAAM,YAAS,CAAC;QAE1C,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACnB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBACzB,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,aAAa,EAAE,EAApB,CAAoB,CAAC,CAAC;aAC5F;iBAAM;gBACL,IAAI,CAAC,aAAa,EAAE,CAAC;aACtB;SACF;IACH,CAAC;IAEO,2CAAa,GAArB;QAAA,iBAUC;QATC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;QAClD,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;aAClC,SAAS,CAAC,UAAC,KAAK;YACf,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,MAAM,EAAE,CAAC;QAChB,CAAC,EAAE,UAAC,KAAwB;YAC1B,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,KAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,oCAAM,GAAd;QACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;QACtB,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,EAAE,CAAC;QAC5B,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,OAAO,GAAG,IAAI,mDAAO,EAAE,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IACnB,CAAC;IAEM,wCAAU,GAAjB,UAAkB,IAAI,EAAE,CAAC;QAAzB,iBAUC;QATC,IAAI,yCAAyC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YAC5D,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SAC1B;aAAM;YACL,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAG,CAAC,CAAC,SAAS,CAAC;gBACtE,IAAM,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,UAAC,KAAK,IAAK,YAAK,KAAK,KAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,OAAO,CAAG,EAApD,CAAoD,CAAC,CAAC;gBAC7G,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;gBACrC,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC3B,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,wCAAU,GAAjB;QACE,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC;IAC1B,CAAC;IAEO,2CAAa,GAArB,UAAsB,QAAkB,EAAE,GAAW,EAAE,SAAiB;QAAxE,iBAWC;QATC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAI;YACtB,QAAQ,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,EAAE;gBACxB,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC;aAC1B;YACD,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAI,GAAG,kBAAa,IAAI,CAAC,IAAM,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC;QACH,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC;aACxC,IAAI,CAAC,iFAAQ,CAAC,cAAM,YAAI,CAAC,OAAO,GAAG,KAAK,EAApB,CAAoB,CAAC,CAAC,CAAC;IAChD,CAAC;IAxGkB;QAAlB,+DAAS,CAAC,MAAM,CAAC;wEAAc,qDAAM;qDAAC;IAEd;QAAxB,+DAAS,CAAC,YAAY,CAAC;wEAAsB,2EAAqB;4DAAC;IARzD,mBAAmB;QAL/B,+DAAS,CAAC;YACT,QAAQ,EAAE,iBAAiB;YAC3B,iJAA2C;;SAE5C,CAAC;+EAYsB,sDAAQ;YACb,+DAAU;YACL,6EAAS;YACN,mFAAY;YACd,sDAAU;OAftB,mBAAmB,CAgH/B;IAAD,0BAAC;CAAA,CAhHwC,iEAAQ,GAgHhD;AAhH+B;;;;;;;;;;;;ACjBhC,2UAA2U,0CAA0C,yoB;;;;;;;;;;;ACArX,+DAA+D,uL;;;;;;;;;;;;;;;;;;;;;ACAH;AACM;AACe;AACN;AAEA;AAQ3E;IAAuC,2EAAQ;IA+B7C,2BACY,QAAkB,EACpB,GAAa,EACb,QAAqB;QAH/B,YAKE,kBAAM,QAAQ,CAAC,SAEhB;QANW,cAAQ,GAAR,QAAQ,CAAU;QACpB,SAAG,GAAH,GAAG,CAAU;QACb,cAAQ,GAAR,QAAQ,CAAa;QAhCxB,cAAQ,GAAU,EAAE,CAAC;QACrB,kBAAY,GAAoB;YACrC;gBACE,KAAK,EAAE,WAAW;gBAClB,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE,MAAM;gBACZ,KAAK,EAAE,UAAC,IAAI,EAAE,CAAC,IAAO,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAC/C,EAAE;gBACD,KAAK,EAAE,aAAa;gBACpB,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,QAAQ;gBACd,KAAK,EAAE,UAAC,IAAI,EAAE,CAAC,IAAO,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAC3C;SAAC,CAAC;QACE,kBAAY,GAAU,CAAC;gBAC5B,IAAI,EAAE,WAAW;gBACjB,cAAc,EAAE,OAAO;gBACvB,IAAI,EAAE,OAAO;aACd;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,cAAc,EAAE,MAAM;gBACtB,IAAI,EAAE,MAAM;aACb;SACA,CAAC;QACK,cAAQ,GAAW,EAAE,CAAC;QACtB,gBAAU,GAAU,EAAE,CAAC;QAEvB,iBAAW,GAAW,CAAC,CAAC;QAQ7B,KAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,cAAQ,CAAC,CAAC,CAAC;;IAC1C,CAAC;IAEM,oCAAQ,GAAf;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAU,mDAAO,CAAC,CAAC;QAC1D,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEM,wCAAY,GAAnB,UAAoB,IAAI;QACtB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAM,KAAK,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC;IACtE,CAAC;IAEM,sCAAU,GAAjB,UAAkB,OAAuB;QAAvB,wCAAuB;QACvC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,sFAAmB,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAC5E,CAAC;IAEO,kCAAM,GAAd,UAAe,IAAI;QAAnB,iBAkBC;QAjBC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;YACpB,IAAI,EAAE;gBACJ,MAAM,EAAE;oBACN,OAAO,EAAE,eAAe;oBACxB,IAAI,EAAE,8CAA8C;iBACrD;gBACD,OAAO,EAAE;oBACP,OAAO,EAAE;wBACP,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE;wBACxD,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,gBAAgB,EAAE,SAAS,EAAE,OAAO,EAAE;qBAAC;iBAClE;aACF;SACF,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,UAAC,KAAK;YAC7B,IAAI,KAAK,KAAK,QAAQ,EAAE;gBACtB,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,CAAC;aAC1C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,wCAAY,GAApB;QAAA,iBAOC;QANC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC,SAAS,CAAC,UAAC,IAAe;YACtF,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;YAC9E,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,WAAW,CAAC,CAAC;YACpC,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAlFU,iBAAiB;QAN7B,+DAAS,CAAC;YACT,SAAS,EAAE,CAAC,gFAAW,CAAC;YACxB,QAAQ,EAAE,cAAc;YACxB,wIAAwC;;SAEzC,CAAC;+EAiCsB,sDAAQ;YACf,oDAAQ;YACH,gFAAW;OAlCpB,iBAAiB,CAmF7B;IAAD,wBAAC;CAAA,CAnFsC,iEAAQ,GAmF9C;AAnF6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbiB;AACN;AACI;AACE;AACkB;AACA;AACC;AACG;AACW;AACd;AACmB;AACR;AAuB7E;IAAA;IAA8B,CAAC;IAAlB,cAAc;QArB1B,8DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,0FAAiB,EAAE,kGAAmB,CAAC;YACtD,eAAe,EAAE,CAAC,kGAAmB,CAAC;YACtC,OAAO,EAAE,CAAC,kGAAmB,CAAC;YAC9B,OAAO,EAAE;gBACP,4DAAY;gBACZ,uEAAiB;gBACjB,qFAAe;gBACf,0DAAW;gBACX,wEAAW;gBACX,8EAAwB;gBACxB,8EAAmB;gBACnB,0EAAY,CAAC,OAAO,EAAE;gBACtB,4DAAY,CAAC,QAAQ,CAAC;oBACpB;wBACE,IAAI,EAAE,EAAE;wBACR,SAAS,EAAE,0FAAiB;qBAC7B;iBACF,CAAC;aACH;SACF,CAAC;OACW,cAAc,CAAI;IAAD,qBAAC;CAAA;AAAJ","file":"pages-admin-products-products-module.js","sourcesContent":["module.exports = \"<div class=\\\"wrapper p-4\\\">\\r\\n  <h3 class=\\\"mb-3\\\">{{product?.id ? 'Edit' : 'Add New'}} Product</h3>\\r\\n\\r\\n  <form #form=\\\"ngForm\\\">\\r\\n    <form-field label=\\\"Name\\\">\\r\\n      <input inputRef name=\\\"name\\\" [(ngModel)]=\\\"product.name\\\" #name=\\\"ngModel\\\" required>\\r\\n      <div invalid *ngIf=\\\"name.dirty && name.invalid\\\">\\r\\n        <span *ngIf=\\\"name?.errors?.required\\\">required</span>\\r\\n      </div>\\r\\n    </form-field>\\r\\n    <td-text-editor [value]=\\\"product.description\\\" #textEditor></td-text-editor>\\r\\n\\r\\n    <hr />\\r\\n\\r\\n    <div class=\\\"product-images\\\">\\r\\n      <label class=\\\"btn btn-info\\\">\\r\\n        Add Image&hellip; <input type=\\\"file\\\" style=\\\"display: none;\\\" multiple (change)=\\\"addImage($event)\\\">\\r\\n      </label>\\r\\n      <div class=\\\"row mt-2 p-2\\\">\\r\\n        <div class=\\\"col col-sm-4 col-md-2\\\" *ngFor=\\\"let item of images; let i = index\\\" (mouseenter)=\\\"item.show = true\\\"\\r\\n          (mouseleave)=\\\"item.show = false\\\">\\r\\n          <img class=\\\"image\\\" [src]=\\\"item.url\\\">\\r\\n          <div class=\\\"actions\\\" *ngIf=\\\"item.show\\\" (click)=\\\"deleteFile(item, i)\\\">\\r\\n            <i class=\\\"fa fa-trash-o\\\"></i>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </form>\\r\\n\\r\\n  <div class=\\\"footer text-right mt-3\\\">\\r\\n    <button class=\\\"btn btn-primary mr-2\\\" [btnStatus]=\\\"loading\\\" [disabled]=\\\"form.invalid\\\" (click)=\\\"save()\\\">Save</button>\\r\\n    <button class=\\\"btn btn-dark\\\" (click)=\\\"closeModal()\\\">Close</button>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \":host .wrapper form .product-images .col {\\n  padding: 0 5px;\\n  position: relative; }\\n  :host .wrapper form .product-images .col img {\\n    max-width: 100%;\\n    border-radius: 2px;\\n    height: 100px; }\\n  :host .wrapper form .product-images .col .actions {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    margin: 0 5px;\\n    width: calc(100% - 10px);\\n    height: 100%;\\n    display: flex;\\n    justify-content: center;\\n    align-items: center;\\n    background: rgba(0, 0, 0, 0.5);\\n    color: white; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9wYWdlcy9hZG1pbi9wcm9kdWN0cy9jb21wb25lbnRzL2FkZC1wcm9kdWN0L0M6XFxVc2Vyc1xcVXNlclxcRGVza3RvcFxccmlmZmEtQnJhc2lsLWZyb250L3NyY1xccGFnZXNcXGFkbWluXFxwcm9kdWN0c1xcY29tcG9uZW50c1xcYWRkLXByb2R1Y3RcXGFkZC1wcm9kdWN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBS1UsY0FBYztFQUNkLGtCQUFrQixFQUFBO0VBTjVCO0lBU1ksZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixhQUFhLEVBQUE7RUFYekI7SUFlWSxrQkFBa0I7SUFDbEIsTUFBTTtJQUNOLE9BQU87SUFDUCxhQUFhO0lBQ2Isd0JBQXdCO0lBQ3hCLFlBQVk7SUFDWixhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLG1CQUFtQjtJQUNuQiw4QkFBc0I7SUFDdEIsWUFBWSxFQUFBIiwiZmlsZSI6InNyYy9wYWdlcy9hZG1pbi9wcm9kdWN0cy9jb21wb25lbnRzL2FkZC1wcm9kdWN0L2FkZC1wcm9kdWN0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIC53cmFwcGVyIHtcclxuICAgIGZvcm0ge1xyXG4gICAgICAucHJvZHVjdC1pbWFnZXMge1xyXG4gICAgICAgIC5jb2wge1xyXG4gICAgICAgICAgcGFkZGluZzogMCA1cHg7XHJcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcblxyXG4gICAgICAgICAgaW1nIHtcclxuICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAycHg7XHJcbiAgICAgICAgICAgIGhlaWdodDogMTAwcHg7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLmFjdGlvbnMge1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgICAgbWFyZ2luOiAwIDVweDtcclxuICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDEwcHgpO1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKGJsYWNrLCAwLjUpO1xyXG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ== */\"","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, Injector, OnInit, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { TdTextEditorComponent } from '@covalent/text-editor';\r\nimport * as cloneDeep from 'lodash.clonedeep';\r\nimport { finalize } from 'rxjs/internal/operators/finalize';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport { Product, ProductApi } from '../../../../../common/sdk';\r\nimport { environment } from '../../../../../environments/environment';\r\nimport { DialogConfig } from '../../../../../modules/dialog/helpers/dialog-config';\r\nimport { DialogRef } from '../../../../../modules/dialog/helpers/dialog-ref';\r\n\r\n@Component({\r\n  selector: 'app-add-product',\r\n  templateUrl: './add-product.component.html',\r\n  styleUrls: ['./add-product.component.scss']\r\n})\r\nexport class AddProductComponent extends Extender implements OnInit {\r\n\r\n  public modalSize: string = 'lg';\r\n  public product: Product = new Product();\r\n  public images: { url: any, show: boolean }[] = [];\r\n  public files: File[] = [];\r\n  @ViewChild('form') public form: NgForm;\r\n  private imgUrl = `${environment.server.BASE_URL}/${environment.server.API_VERSION}/Containers/container`;\r\n  @ViewChild('textEditor') private _textEditor: TdTextEditorComponent;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _http: HttpClient,\r\n    private _dialogRef: DialogRef,\r\n    private _dialogConfig: DialogConfig,\r\n    private _productApi: ProductApi\r\n  ) {\r\n    super(injector);\r\n  }\r\n\r\n  public ngOnInit() {\r\n    const data: Product = this._dialogConfig.data;\r\n    if (data) {\r\n      this.product = cloneDeep(data);\r\n    }\r\n    this.product.images ? this.product.images.map((image) => this.images.push({ url: image, show: false })) : null;\r\n  }\r\n\r\n  public addImage(event) {\r\n    if (event.target.files.length > 0) {\r\n      const _fileList = [].slice.call(event.target.files);\r\n      _fileList.forEach((file) => {\r\n        this.files.push(file);\r\n        this.createFileUrl(file);\r\n      });\r\n      delete event.target.files;\r\n    }\r\n  }\r\n\r\n  public createFileUrl(file: File) {\r\n    const reader: FileReader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      if (this.product !== null && this.product !== undefined) {\r\n        this.images.push({ url: reader.result, show: false });\r\n      }\r\n    });\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  public save(): void {\r\n    this.loading = true;\r\n    const formData: FormData = new FormData();\r\n    const uploadUrl = `${this.imgUrl}/upload`;\r\n\r\n    if (this.form.valid) {\r\n      if (this.files.length > 0) {\r\n        this._uploadImages(formData, this.imgUrl, uploadUrl).subscribe(() => this.upsertProduct());\r\n      } else {\r\n        this.upsertProduct();\r\n      }\r\n    }\r\n  }\r\n\r\n  private upsertProduct() {\r\n    this.product.description = this._textEditor.value;\r\n    this._productApi.upsert(this.product)\r\n      .subscribe((_data) => {\r\n        this.loading = false;\r\n        this._reset();\r\n      }, (error: HttpErrorResponse) => {\r\n        this.loading = false;\r\n        this.toastr.error(error.message);\r\n      });\r\n  }\r\n\r\n  private _reset() {\r\n    this.form.resetForm();\r\n    this._textEditor.value = '';\r\n    this.files = [];\r\n    this.product = new Product();\r\n    this.images = [];\r\n  }\r\n\r\n  public deleteFile(file, i) {\r\n    if (/data:image\\/([a-zA-Z]*);base64,([^\\\"]*)/.test(file.url)) {\r\n      this.images.splice(i, 1);\r\n    } else {\r\n      this._http.delete(`${file.url.replace('download', 'files')}`).subscribe(() => {\r\n        const index = this.product.images.findIndex((image) => image === `${file.url.replace('download', 'files')}`);\r\n        this.product.images.splice(index, 1);\r\n        this.images.splice(i, 1);\r\n      });\r\n    }\r\n  }\r\n\r\n  public closeModal(): void {\r\n    this._dialogRef.close();\r\n  }\r\n\r\n  private _uploadImages(formData: FormData, url: string, uploadUrl: string) {\r\n\r\n    this.files.forEach((file) => {\r\n      formData.append('uploads', file, file.name);\r\n      if (!this.product.images) {\r\n        this.product.images = [];\r\n      }\r\n      this.product.images.push(`${url}/download/${file.name}`);\r\n    });\r\n    return this._http.post(uploadUrl, formData)\r\n      .pipe(finalize(() => this.loading = false));\r\n  }\r\n\r\n}\r\n","module.exports = \"<div class=\\\"container-fluid bg-white my-3\\\">\\r\\n\\r\\n  <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" (click)=\\\"addProduct()\\\">Add Product</button>\\r\\n\\r\\n  <app-spinner class=\\\"mt-3\\\" [isLoading]=\\\"loading\\\">\\r\\n\\r\\n    <ng-container *ngIf=\\\"products && products.length > 0\\\">\\r\\n      <app-table [config]=\\\"{showSelect: false, itemsPerPage: pageSize}\\\" [data]=\\\"products | orderBy: '-updatedAt'\\\"\\r\\n        [headers]=\\\"tableHeaders\\\" [actions]=\\\"tableActions\\\">\\r\\n      </app-table>\\r\\n      <ngb-pagination maxSize=\\\"5\\\" [pageSize]=\\\"pageSize\\\" [collectionSize]=\\\"productsBK.length\\\"\\r\\n        (pageChange)=\\\"onPageChange($event)\\\" aria-label=\\\"Default pagination\\\">\\r\\n      </ngb-pagination>\\r\\n    </ng-container>\\r\\n\\r\\n    <ng-container *ngIf=\\\"products && products.length === 0\\\">\\r\\n      <div class=\\\"jumbotron\\\">\\r\\n        <h4>Empty</h4>\\r\\n        <p class=\\\"lead text-dark\\\">No products to display</p>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n\\r\\n  </app-spinner>\\r\\n\\r\\n</div>\\r\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvcGFnZXMvYWRtaW4vcHJvZHVjdHMvY29tcG9uZW50cy9wcm9kdWN0cy9wcm9kdWN0cy5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component, Injector, OnInit } from '@angular/core';\r\nimport { Extender } from '../../../../../common/helpers/extender';\r\nimport { OrderByPipe } from '../../../../../common/pipes/order-by/order-by.pipe';\r\nimport { FireLoopRef, Product, RealTime } from '../../../../../common/sdk';\r\nimport { ITableActions } from '../../../../../modules/table/models/table';\r\nimport { AddProductComponent } from '../add-product/add-product.component';\r\n\r\n@Component({\r\n  providers: [OrderByPipe],\r\n  selector: 'app-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.scss']\r\n})\r\nexport class ProductsComponent extends Extender implements OnInit {\r\n\r\n  public products: any[] = [];\r\n  public tableActions: ITableActions[] = [\r\n    {\r\n      color: 'text-info',\r\n      icon: 'pencil-square-o',\r\n      text: 'Edit',\r\n      event: (data, i) => { this.addProduct(data); }\r\n    }, {\r\n      color: 'text-danger',\r\n      icon: 'trash-o',\r\n      text: 'Delete',\r\n      event: (data, i) => { this.delete(data); }\r\n    }];\r\n  public tableHeaders: any[] = [{\r\n    text: 'images[0]',\r\n    formatted_text: 'Image',\r\n    type: 'image',\r\n  },\r\n  {\r\n    text: 'name',\r\n    formatted_text: 'Name',\r\n    type: 'text',\r\n  }\r\n  ];\r\n  public pageSize: number = 10;\r\n  public productsBK: any[] = [];\r\n  public productRef: FireLoopRef<Product>;\r\n  public currentPage: number = 1;\r\n\r\n  constructor(\r\n    protected injector: Injector,\r\n    private _rt: RealTime,\r\n    private _orderBy: OrderByPipe\r\n  ) {\r\n    super(injector);\r\n    this._rt.onReady().subscribe(() => { });\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.productRef = this._rt.FireLoop.ref<Product>(Product);\r\n    this._getproducts();\r\n  }\r\n\r\n  public onPageChange(page): void {\r\n    this.currentPage = page;\r\n    const start = (page - 1) * this.pageSize;\r\n    this.products = this.productsBK.slice(start, start + this.pageSize);\r\n  }\r\n\r\n  public addProduct(product: Product = null): void {\r\n    this.dialog.open(AddProductComponent, product ? { data: product } : null);\r\n  }\r\n\r\n  private delete(item): void {\r\n    this.dialog.openAlert({\r\n      data: {\r\n        config: {\r\n          heading: 'Delete Raffle',\r\n          body: 'Are you sure you want to delete this raffle?'\r\n        },\r\n        buttons: {\r\n          buttons: [\r\n            { text: 'Delete', color: 'danger', eventname: 'delete' },\r\n            { text: 'Close', color: 'outline-danger', eventname: 'close' }]\r\n        }\r\n      }\r\n    }).afterClosed.subscribe((event) => {\r\n      if (event === 'delete') {\r\n        this.productRef.remove(item).subscribe();\r\n      }\r\n    });\r\n  }\r\n\r\n  private _getproducts(): void {\r\n    this.loading = true;\r\n    this.productRef.on('change', { where: { isDeleted: false } }).subscribe((data: Product[]) => {\r\n      this.products = this.productsBK = this._orderBy.transform(data, '-updatedAt');\r\n      this.onPageChange(this.currentPage);\r\n      this.loading = false;\r\n    });\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { CovalentTextEditorModule } from '@covalent/text-editor';\r\nimport { NgbPaginationModule } from '@ng-bootstrap/ng-bootstrap';\r\nimport { WinitCommonModule } from '../../../common/common.module';\r\nimport { DialogModule } from '../../../modules/dialog/dialog.module';\r\nimport { FormFieldModule } from '../../../modules/form-field/form-field.module';\r\nimport { TableModule } from '../../../modules/table/table.module';\r\nimport { AddProductComponent } from './components/add-product/add-product.component';\r\nimport { ProductsComponent } from './components/products/products.component';\r\n\r\n@NgModule({\r\n  declarations: [ProductsComponent, AddProductComponent],\r\n  entryComponents: [AddProductComponent],\r\n  exports: [AddProductComponent],\r\n  imports: [\r\n    CommonModule,\r\n    WinitCommonModule,\r\n    FormFieldModule,\r\n    FormsModule,\r\n    TableModule,\r\n    CovalentTextEditorModule,\r\n    NgbPaginationModule,\r\n    DialogModule.forRoot(),\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: ProductsComponent\r\n      }\r\n    ])\r\n  ]\r\n})\r\nexport class ProductsModule { }\r\n"],"sourceRoot":""}